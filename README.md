# IMTP Monorepo

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨pnpmå’ŒViteæ„å»ºçš„ç°ä»£åŒ–monorepoé¡¹ç›®ï¼Œç”¨äºå¼€å‘å’Œå‘å¸ƒå¤šä¸ªnpmåŒ…ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- **ç°ä»£åŒ–æ„å»º**: ä½¿ç”¨Vite + TypeScriptæ„å»º
- **å®Œæ•´å·¥å…·é“¾**: ESLintã€Prettierã€Vitestã€Husky
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **è‡ªåŠ¨åŒ–è„šæœ¬**: ä¸°å¯Œçš„å¼€å‘å·¥å…·å’Œè„šæœ¬
- **ç¯å¢ƒç®¡ç†**: å¤šç¯å¢ƒé…ç½®æ”¯æŒ
- **äº¤äº’å¼ç®¡ç†**: ç»Ÿä¸€çš„äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
imtp/
â”œâ”€â”€ packages/           # æ‰€æœ‰åŒ…çš„ç›®å½•
â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒåŠŸèƒ½åŒ…
â”‚   â”œâ”€â”€ data/          # æ•°æ®å¤„ç†åŒ…
â”‚   â”œâ”€â”€ types/         # ç±»å‹å®šä¹‰åŒ…
â”‚   â”œâ”€â”€ ui/            # UIç»„ä»¶åŒ…
â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°åŒ…
â”‚   â”œâ”€â”€ example-package/ # ç¤ºä¾‹åŒ…
â”‚   â””â”€â”€ test-package/  # æµ‹è¯•åŒ…
â”œâ”€â”€ scripts/           # å¼€å‘è„šæœ¬
â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ configs/           # æ„å»ºé…ç½®
â”œâ”€â”€ examples/          # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ package.json       # æ ¹package.json
â”œâ”€â”€ pnpm-workspace.yaml # pnpm workspaceé…ç½®
â”œâ”€â”€ tsconfig.json      # TypeScripté…ç½®
â”œâ”€â”€ vite.config.ts     # Viteé…ç½®
â”œâ”€â”€ vitest.config.ts   # æµ‹è¯•é…ç½®
â””â”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…pnpmï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰
npm install -g pnpm

# å®‰è£…é¡¹ç›®ä¾èµ–
pnpm install
```

### å¼€å‘

```bash
# äº¤äº’å¼å¼€å‘å·¥å…·ï¼ˆæ¨èï¼‰
pnpm interactive

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ‰€æœ‰åŒ…çš„å˜åŒ–ï¼‰
pnpm dev

# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# æ¸…ç†æ„å»ºæ–‡ä»¶
pnpm clean
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰åŒ…çš„æµ‹è¯•
pnpm test

# è¿è¡Œlintæ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

## ğŸ¯ äº¤äº’å¼å·¥å…·

é¡¹ç›®æä¾›äº†ç»Ÿä¸€çš„äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨ï¼Œç®€åŒ–äº†å¤æ‚çš„å‘½ä»¤æ“ä½œï¼š

```bash
# å¯åŠ¨äº¤äº’å¼å·¥å…·
pnpm interactive
```

### å¯ç”¨åŠŸèƒ½

- ğŸ“¦ **ä¾èµ–ç®¡ç†**: æ£€æŸ¥æ›´æ–°ã€æ£€æµ‹å†²çªã€å®‰å…¨æ‰«æ
- ğŸ”§ **ç¯å¢ƒç®¡ç†**: ç¯å¢ƒå˜é‡æ£€æŸ¥ã€éªŒè¯ã€åˆ›å»º
- ğŸ’¾ **å¤‡ä»½ç®¡ç†**: åˆ›å»ºå¤‡ä»½ã€å›æ»šã€æ¸…ç†
- ğŸ“Š **ç›‘æ§ç®¡ç†**: æ€§èƒ½ç›‘æ§ã€å®‰å…¨ç›‘æ§ã€æŠ¥å‘Šç”Ÿæˆ
- ğŸ› ï¸ **å¼€å‘å·¥å…·**: ä»£ç æ£€æŸ¥ã€ç±»å‹æ£€æŸ¥ã€é¡¹ç›®åˆ†æ
- ğŸ“‹ **ç”Ÿæˆå·¥å…·**: ç±»å‹ç”Ÿæˆã€APIç”Ÿæˆã€æ–‡æ¡£ç”Ÿæˆ
- ğŸ§ª **æµ‹è¯•å·¥å…·**: è¿è¡Œæµ‹è¯•ã€è¦†ç›–ç‡ã€UIæµ‹è¯•
- ğŸ—ï¸ **æ„å»ºå·¥å…·**: æ„å»ºã€æ¸…ç†ã€æœ€å°åŒ–æ„å»º
- ğŸ”’ **å®‰å…¨å·¥å…·**: å®‰å…¨æ‰«æã€æ¼æ´æ£€æµ‹

## ğŸ“¦ åˆ›å»ºæ–°åŒ…

### ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºæ–°åŒ…
node scripts/create-package.js <package-name>

# ç¤ºä¾‹
node scripts/create-package.js utils
node scripts/create-package.js components
```

### æ‰‹åŠ¨åˆ›å»º

1. åœ¨`packages/`ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹
2. å¤åˆ¶`example-package`çš„ç»“æ„
3. ä¿®æ”¹`package.json`ä¸­çš„åŒ…åå’Œæè¿°
4. åœ¨æ ¹ç›®å½•è¿è¡Œ`pnpm install`å®‰è£…æ–°åŒ…çš„ä¾èµ–

## ğŸ”§ ç¯å¢ƒç®¡ç†

é¡¹ç›®æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼š

```bash
# åˆ›å»ºç¯å¢ƒæ–‡ä»¶
pnpm env:create development
pnpm env:create production
pnpm env:create test

# éªŒè¯ç¯å¢ƒé…ç½®
pnpm env:validate

# æ£€æŸ¥ç¯å¢ƒçŠ¶æ€
pnpm env:check
```

## ğŸ“Š ç±»å‹ç”Ÿæˆ

é¡¹ç›®æä¾›å®Œæ•´çš„TypeScriptç±»å‹ç”Ÿæˆå·¥å…·é“¾ï¼š

```bash
# ç”Ÿæˆæ‰€æœ‰ç±»å‹
pnpm generate:all

# åˆ†æ­¥ç”Ÿæˆ
pnpm generate:types    # è‡ªå®šä¹‰ç±»å‹ç”Ÿæˆå™¨
pnpm generate:api      # OpenAPIç±»å‹
pnpm generate:graphql  # GraphQLç±»å‹
pnpm docs             # ç”Ÿæˆæ–‡æ¡£
```

## ğŸ“ˆ ç›‘æ§å’Œå¤‡ä»½

```bash
# æ€§èƒ½ç›‘æ§
node scripts/monitor.js build
node scripts/monitor.js test
node scripts/monitor.js security

# å¤‡ä»½ç®¡ç†
node scripts/rollback.js create
node scripts/rollback.js list
node scripts/rollback.js rollback <backup-name>
```

## ğŸ“¦ åŒ…å‘½åè§„èŒƒ

æ‰€æœ‰åŒ…éƒ½ä½¿ç”¨`@imtp/`å‰ç¼€ï¼Œä¾‹å¦‚ï¼š

- `@imtp/core`
- `@imtp/data`
- `@imtp/types`
- `@imtp/ui`
- `@imtp/utils`

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åŒ…ç®¡ç†å™¨**: pnpm
- **æ„å»ºå·¥å…·**: Vite
- **è¯­è¨€**: TypeScript
- **æµ‹è¯•**: Vitest
- **ä»£ç æ£€æŸ¥**: ESLint
- **æ ¼å¼åŒ–**: Prettier
- **ç‰ˆæœ¬ç®¡ç†**: Changesets
- **å·¥ä½œåŒº**: pnpm workspaces
- **Gité’©å­**: Husky

## ğŸ“š å¼€å‘è§„èŒƒ

1. æ‰€æœ‰åŒ…éƒ½åº”è¯¥æœ‰å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
2. ä½¿ç”¨ESLintè¿›è¡Œä»£ç æ£€æŸ¥
3. ç¼–å†™å•å…ƒæµ‹è¯•
4. æä¾›å®Œæ•´çš„READMEæ–‡æ¡£
5. éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [è„šæœ¬è¯¦ç»†è¯´æ˜æ–‡æ¡£](./è„šæœ¬è¯¦ç»†è¯´æ˜æ–‡æ¡£.md)
- [TSç±»å‹ç”ŸæˆæŒ‡å—](./TSç±»å‹ç”Ÿæˆ.md)
- [ç¯å¢ƒé…ç½®æ–‡æ¡£](./env.md)
- [CI/CDæŒ‡å—](./CI&CD.md)
- [åŠŸèƒ½å»ºè®®](./åŠŸèƒ½å»ºè®®.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT
