# IMTP é¡¹ç›®è„šæœ¬è¯¦ç»†è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•

[toc]

## ğŸ“– æ¦‚è¿°

IMTP é¡¹ç›®åŒ…å«äº†ä¸€å¥—å®Œæ•´çš„å¼€å‘å·¥å…·é“¾è„šæœ¬ï¼Œæ¶µç›–äº†ä»ç¯å¢ƒç®¡ç†ã€ç±»å‹ç”Ÿæˆã€æ„å»ºæµ‹è¯•åˆ°ç›‘æ§å¤‡ä»½çš„å…¨æµç¨‹ã€‚è¿™äº›è„šæœ¬é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒç‹¬ç«‹è¿è¡Œå’Œç»„åˆä½¿ç”¨ã€‚

### ğŸ¯ è„šæœ¬è®¾è®¡åŸåˆ™

- **æ¨¡å—åŒ–**: æ¯ä¸ªè„šæœ¬ä¸“æ³¨äºç‰¹å®šåŠŸèƒ½
- **å®¹é”™æ€§**: æ”¯æŒä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆ
- **å¯é…ç½®**: é€šè¿‡ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶çµæ´»é…ç½®
- **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œè‡ªå®šä¹‰
- **äº¤äº’å¼**: æä¾›ç»Ÿä¸€çš„äº¤äº’å¼ç®¡ç†ç•Œé¢

## ğŸ“‚ è„šæœ¬åˆ†ç±»

### æŒ‰åŠŸèƒ½åˆ†ç±»

| ç±»åˆ«     | è„šæœ¬æ•°é‡ | ä¸»è¦åŠŸèƒ½                         | çŠ¶æ€      |
| -------- | -------- | -------------------------------- | --------- |
| æ ¸å¿ƒå¼€å‘ | 3        | é¡¹ç›®åˆ†æã€å¼€å‘å·¥å…·ã€åŒ…åˆ›å»º       | âœ… å·²å®Œæˆ |
| ç¯å¢ƒç®¡ç† | 4        | ç¯å¢ƒå˜é‡æ£€æŸ¥ã€éªŒè¯ã€åˆ›å»º         | âœ… å·²å®Œæˆ |
| ç±»å‹ç”Ÿæˆ | 3        | TypeScriptã€APIã€GraphQLç±»å‹ç”Ÿæˆ | âœ… å·²å®Œæˆ |
| æ„å»ºæµ‹è¯• | 6        | æ„å»ºã€æµ‹è¯•ã€æ¸…ç†ã€æ ¼å¼åŒ–         | âœ… å·²å®Œæˆ |
| ä»£ç è´¨é‡ | 3        | Lintã€ç±»å‹æ£€æŸ¥ã€é¢„æäº¤           | âœ… å·²å®Œæˆ |
| ç›‘æ§å¤‡ä»½ | 2        | æ€§èƒ½ç›‘æ§ã€å¤‡ä»½å›æ»š               | âœ… å·²å®Œæˆ |
| å·¥å…·è„šæœ¬ | 4        | æœ€å°åŒ–æ„å»ºã€éªŒè¯ç­‰               | âœ… å·²å®Œæˆ |
| äº¤äº’å¼   | 1        | ç»Ÿä¸€çš„äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨           | âœ… å·²å®Œæˆ |

### æŒ‰ä½¿ç”¨é¢‘ç‡åˆ†ç±»

- **é«˜é¢‘ä½¿ç”¨**: äº¤äº’å¼å·¥å…·ã€æ„å»ºã€æµ‹è¯•ã€æ ¼å¼åŒ–ã€ç¯å¢ƒç®¡ç†
- **ä¸­é¢‘ä½¿ç”¨**: ç±»å‹ç”Ÿæˆã€ä»£ç è´¨é‡æ£€æŸ¥
- **ä½é¢‘ä½¿ç”¨**: ç›‘æ§ã€å¤‡ä»½ã€åˆ†æ

## ğŸ¯ äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨

### `interactive.js` - ç»Ÿä¸€äº¤äº’å¼ç®¡ç†å™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: æä¾›ç»Ÿä¸€çš„äº¤äº’å¼ç•Œé¢ï¼Œæ•´åˆæ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼Œå¤§å¹…ç®€åŒ–package.jsonè„šæœ¬

**ä½¿ç”¨æ–¹æ³•**:

```bash
# å¯åŠ¨äº¤äº’å¼ç®¡ç†å™¨
pnpm interactive
```

**åŠŸèƒ½æ¨¡å—**:

```
ğŸš€ IMTP äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨
==================================================
è¯·é€‰æ‹©è¦æ‰§è¡Œçš„åŠŸèƒ½ï¼š

1. ğŸ“¦ ä¾èµ–ç®¡ç† (7ä¸ªé€‰é¡¹)
2. ğŸ”§ ç¯å¢ƒç®¡ç† (5ä¸ªé€‰é¡¹)
3. ğŸ’¾ å¤‡ä»½ç®¡ç† (4ä¸ªé€‰é¡¹)
4. ğŸ“Š ç›‘æ§ç®¡ç† (5ä¸ªé€‰é¡¹)
5. ğŸ› ï¸  å¼€å‘å·¥å…· (7ä¸ªé€‰é¡¹)
6. ğŸ“‹ ç”Ÿæˆå·¥å…· (5ä¸ªé€‰é¡¹)
7. ğŸ§ª æµ‹è¯•å·¥å…· (4ä¸ªé€‰é¡¹)
8. ğŸ—ï¸  æ„å»ºå·¥å…· (4ä¸ªé€‰é¡¹)
9. ğŸ”’ å®‰å…¨å·¥å…· (2ä¸ªé€‰é¡¹)
0. âŒ é€€å‡º
```

**ä¼˜åŒ–æ•ˆæœ**:

- **package.jsonè„šæœ¬æ•°é‡**: ä»35ä¸ªå‡å°‘åˆ°11ä¸ª (å‡å°‘68%)
- **å‘½ä»¤è®°å¿†**: åªéœ€è¦è®°ä½ä¸€ä¸ªå‘½ä»¤ `pnpm interactive`
- **ç”¨æˆ·ä½“éªŒ**: æ¸…æ™°çš„èœå•å’Œé€‰é¡¹ï¼Œå¸¦emojiå›¾æ ‡
- **æ“ä½œæ•ˆç‡**: å¾ªç¯æ“ä½œï¼Œæ‰§è¡Œåè‡ªåŠ¨è¿”å›èœå•

## ğŸ”§ æ ¸å¿ƒå¼€å‘è„šæœ¬

### 1. `dev-tools.js` - å¼€å‘å·¥å…·é›† âœ… å·²å®ç°

**åŠŸèƒ½**: æä¾›ç»Ÿä¸€çš„å¼€å‘å·¥å…·å…¥å£ï¼Œé›†æˆå¤šç§å¼€å‘åŠŸèƒ½

**ä½¿ç”¨æ–¹æ³•**:

```bash
# åŸºæœ¬ç”¨æ³•
node scripts/dev-tools.js <command> [sub-command]

# é¡¹ç›®åˆ†æ
node scripts/dev-tools.js analyze

# ä»£ç è´¨é‡æ£€æŸ¥
node scripts/dev-tools.js lint

# ç±»å‹æ£€æŸ¥
node scripts/dev-tools.js type-check

# ç¯å¢ƒå˜é‡ç®¡ç†
node scripts/dev-tools.js env:check
node scripts/dev-tools.js env:validate
node scripts/dev-tools.js env:create
node scripts/dev-tools.js env:local
node scripts/dev-tools.js env:list
```

**åŠŸèƒ½è¯¦è§£**:

#### é¡¹ç›®åˆ†æ (`analyze`)

- åˆ†æåŒ…å¤§å°å’Œä¾èµ–å…³ç³»
- æµ‹é‡æ„å»ºæ—¶é—´
- æ£€æŸ¥ä»£ç è´¨é‡æŒ‡æ ‡
- ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š

#### ä»£ç è´¨é‡æ£€æŸ¥ (`lint`)

- è¿è¡Œ ESLint æ£€æŸ¥
- ç»Ÿè®¡é”™è¯¯å’Œè­¦å‘Šæ•°é‡
- ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
- æ”¯æŒè‡ªåŠ¨ä¿®å¤

#### ç±»å‹æ£€æŸ¥ (`type-check`)

- è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
- æ£€æŸ¥æ‰€æœ‰åŒ…çš„ç±»å‹å®šä¹‰
- ç”Ÿæˆç±»å‹é”™è¯¯æŠ¥å‘Š

#### ç¯å¢ƒå˜é‡ç®¡ç† (`env:*`)

- `env:check`: æ˜¾ç¤ºå½“å‰ç¯å¢ƒå˜é‡
- `env:validate`: éªŒè¯ç¯å¢ƒå˜é‡å®Œæ•´æ€§
- `env:create`: åˆ›å»ºç¯å¢ƒæ–‡ä»¶æ¨¡æ¿
- `env:local`: åˆ›å»ºæœ¬åœ°ç¯å¢ƒæ–‡ä»¶
- `env:list`: åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒæ–‡ä»¶

**é…ç½®é€‰é¡¹**:

- é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ£€æŸ¥è§„åˆ™
- æ”¯æŒè‡ªå®šä¹‰å¿½ç•¥æ–‡ä»¶
- å¯é…ç½®è¶…æ—¶æ—¶é—´

### 2. `create-package.js` - åŒ…åˆ›å»ºå·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: å¿«é€Ÿåˆ›å»ºæ–°çš„ npm åŒ…ï¼Œè‡ªåŠ¨ç”Ÿæˆæ ‡å‡†ç›®å½•ç»“æ„å’Œé…ç½®æ–‡ä»¶

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/create-package.js <package-name>
```

**ç¤ºä¾‹**:

```bash
node scripts/create-package.js my-utility
```

**ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„**:

```
packages/my-utility/
â”œâ”€â”€ package.json          # åŒ…é…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json         # TypeScripté…ç½®
â”œâ”€â”€ vite.config.ts        # Viteæ„å»ºé…ç½®
â”œâ”€â”€ vitest.config.ts      # æµ‹è¯•é…ç½®
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts          # ä¸»å…¥å£æ–‡ä»¶
â””â”€â”€ tests/
    â””â”€â”€ index.test.ts     # æµ‹è¯•æ–‡ä»¶
```

**è‡ªåŠ¨é…ç½®å†…å®¹**:

- åŒ…åæ ¼å¼: `@imtp/<package-name>`
- æ ‡å‡†è„šæœ¬: build, test, lint, clean
- å¼€å‘ä¾èµ–: TypeScript, Vite, Vitest
- å‘å¸ƒé…ç½®: public access

**éªŒè¯è§„åˆ™**:

- åŒ…ååªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦
- å¿…é¡»ä»¥å­—æ¯å¼€å¤´
- æ£€æŸ¥åŒ…åæ˜¯å¦å·²å­˜åœ¨

### 3. `dependency-manager.js` - ä¾èµ–ç®¡ç†å·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: æ™ºèƒ½ç®¡ç†é¡¹ç›®ä¾èµ–ï¼ŒåŒ…æ‹¬æ›´æ–°ã€å†²çªæ£€æµ‹ã€å®‰å…¨æ‰«æ

**ä½¿ç”¨æ–¹æ³•**:

```bash
# æ£€æŸ¥ä¾èµ–æ›´æ–°
node scripts/dependency-manager.js updates

# æ£€æµ‹ä¾èµ–å†²çª
node scripts/dependency-manager.js conflicts

# å®‰å…¨æ‰«æ
node scripts/dependency-manager.js security

# æ¸…ç†æ— ç”¨ä¾èµ–
node scripts/dependency-manager.js cleanup
```

## ğŸŒ ç¯å¢ƒç®¡ç†è„šæœ¬

### 1. `env-manager.js` - ç¯å¢ƒå˜é‡ç®¡ç†å™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: ç»Ÿä¸€ç®¡ç†é¡¹ç›®ç¯å¢ƒå˜é‡ï¼Œæ”¯æŒå¤šç¯å¢ƒé…ç½®

**ä½¿ç”¨æ–¹æ³•**:

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
node scripts/env-manager.js check

# éªŒè¯ç¯å¢ƒå˜é‡
node scripts/env-manager.js validate

# åˆ›å»ºç¯å¢ƒæ–‡ä»¶
node scripts/env-manager.js create [type]

# åˆ—å‡ºç¯å¢ƒæ–‡ä»¶
node scripts/env-manager.js list
```

**æ”¯æŒçš„ç¯å¢ƒç±»å‹**:

- `development` - å¼€å‘ç¯å¢ƒ
- `production` - ç”Ÿäº§ç¯å¢ƒ
- `test` - æµ‹è¯•ç¯å¢ƒ
- `local` - æœ¬åœ°ç¯å¢ƒ

**ç¯å¢ƒæ–‡ä»¶ä¼˜å…ˆçº§**:

1. `.env.local` (æœ€é«˜ä¼˜å…ˆçº§)
2. `.env.[mode].local`
3. `.env.[mode]`
4. `.env` (æœ€ä½ä¼˜å…ˆçº§)

### 2. `validate-env.js` - ç¯å¢ƒå˜é‡éªŒè¯å™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: éªŒè¯ç¯å¢ƒå˜é‡çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/validate-env.js
```

**éªŒè¯å†…å®¹**:

- å¿…éœ€ç¯å¢ƒå˜é‡æ£€æŸ¥
- ç¯å¢ƒå˜é‡ç±»å‹éªŒè¯
- ç¯å¢ƒå˜é‡æ ¼å¼éªŒè¯
- æ•æ„Ÿä¿¡æ¯æ£€æŸ¥

**å¿…éœ€ç¯å¢ƒå˜é‡**:

- `DATABASE_URL` - æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
- `JWT_SECRET` - JWTå¯†é’¥

**å¯é€‰ç¯å¢ƒå˜é‡**:

- `API_BASE_URL` - APIåŸºç¡€åœ°å€
- `REDIS_URL` - Redisè¿æ¥åœ°å€
- `SMTP_*` - é‚®ä»¶æœåŠ¡é…ç½®
- `GOOGLE_*` - GoogleæœåŠ¡é…ç½®

### 3. `test-env.js` - ç¯å¢ƒæµ‹è¯•å·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: æµ‹è¯•ç¯å¢ƒé…ç½®çš„æ­£ç¡®æ€§å’Œå¯ç”¨æ€§

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/test-env.js
```

**æµ‹è¯•å†…å®¹**:

- æ•°æ®åº“è¿æ¥æµ‹è¯•
- Redisè¿æ¥æµ‹è¯•
- APIæœåŠ¡æµ‹è¯•
- é‚®ä»¶æœåŠ¡æµ‹è¯•

## ğŸ”¤ ç±»å‹ç”Ÿæˆè„šæœ¬

### 1. `generate-types.js` - TypeScriptç±»å‹ç”Ÿæˆå™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: ä»å¤šç§æºè‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/generate-types.js generate
```

**æ”¯æŒçš„æºç±»å‹**:

- **APIæ¥å£**: Swagger/OpenAPI æ–‡æ¡£
- **æ•°æ®åº“æ¨¡å‹**: Prisma/Sequelize/TypeORM æ¨¡å¼
- **ç¯å¢ƒå˜é‡**: .env æ–‡ä»¶
- **é…ç½®æ–‡ä»¶**: JSON é…ç½®æ–‡ä»¶

**é…ç½®é€‰é¡¹**:

```javascript
const CONFIG = {
  sources: {
    api: {
      type: 'swagger',
      url: 'http://localhost:3000/api-docs',
      output: 'packages/types/src/api/generated',
    },
    database: {
      type: 'prisma',
      schema: 'prisma/schema.prisma',
      output: 'packages/types/src/database/generated',
    },
    env: {
      type: 'env',
      file: 'env.example',
      output: 'packages/types/src/env/generated',
    },
    config: {
      type: 'json',
      files: ['config/*.json'],
      output: 'packages/types/src/config/generated',
    },
  },
  output: {
    types: true, // ç”Ÿæˆç±»å‹æ–‡ä»¶
    docs: true, // ç”Ÿæˆæ–‡æ¡£
    tests: true, // ç”Ÿæˆæµ‹è¯•
    format: true, // æ ¼å¼åŒ–ä»£ç 
  },
};
```

**ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„**:

```
packages/types/src/
â”œâ”€â”€ api/generated/
â”‚   â”œâ”€â”€ api.ts
â”‚   â””â”€â”€ openapi.ts
â”œâ”€â”€ database/generated/
â”‚   â””â”€â”€ database.ts
â”œâ”€â”€ env/generated/
â”‚   â””â”€â”€ env.ts
â””â”€â”€ config/generated/
    â””â”€â”€ config.ts
```

### 2. `generate-api.js` - APIç±»å‹ç”Ÿæˆå™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: ä¸“é—¨ç”¨äºä» API æ–‡æ¡£ç”Ÿæˆ TypeScript ç±»å‹

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/generate-api.js
```

**ç‰¹æ€§**:

- æ”¯æŒ Swagger/OpenAPI æ–‡æ¡£
- è‡ªåŠ¨å®‰è£…ä¾èµ–å·¥å…·
- å®¹é”™å¤„ç†ï¼ˆAPIæœåŠ¡æœªè¿è¡Œæ—¶ç”Ÿæˆç¤ºä¾‹ï¼‰
- å¯é…ç½®è¾“å‡ºè·¯å¾„

**ç¯å¢ƒå˜é‡é…ç½®**:

- `API_BASE_URL` - APIåŸºç¡€åœ°å€
- `API_DOCS_URL` - APIæ–‡æ¡£åœ°å€
- `API_TYPES_OUTPUT` - è¾“å‡ºæ–‡ä»¶è·¯å¾„

**ç¤ºä¾‹è¾“å‡º**:

```typescript
export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  message?: string;
  code?: number;
}

export interface User {
  id: string;
  email: string;
  name: string;
  createdAt: Date;
  updatedAt: Date;
}
```

### 3. `generate:graphql` - GraphQLç±»å‹ç”Ÿæˆå™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: ä» GraphQL schema ç”Ÿæˆ TypeScript ç±»å‹

**ä½¿ç”¨æ–¹æ³•**:

```bash
pnpm generate:graphql
```

**é…ç½®**: ä½¿ç”¨ `codegen.yml` é…ç½®æ–‡ä»¶

## ğŸ—ï¸ æ„å»ºå’Œæµ‹è¯•è„šæœ¬

### 1. æ„å»ºè„šæœ¬ âœ… å·²å®ç°

#### `build` - æ ‡å‡†æ„å»º

```bash
pnpm build
```

- æ„å»ºæ‰€æœ‰åŒ…
- ç”Ÿæˆ ESMã€CJSã€UMD æ ¼å¼
- ç”Ÿæˆç±»å‹å®šä¹‰æ–‡ä»¶

#### `build:min` - æœ€å°åŒ–æ„å»º

```bash
pnpm build:min
```

- ç”Ÿæˆå‹ç¼©ç‰ˆæœ¬
- ä½¿ç”¨ Terser è¿›è¡Œä»£ç å‹ç¼©
- ç”Ÿæˆ `.min.js` æ–‡ä»¶

#### `build:clean` - æ¸…ç†æ„å»º

```bash
pnpm build:clean
```

- æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
- é‡æ–°æ„å»ºæ‰€æœ‰åŒ…

### 2. æµ‹è¯•è„šæœ¬ âœ… å·²å®ç°

#### `test` - æ ‡å‡†æµ‹è¯•

```bash
pnpm test
```

- è¿è¡Œæ‰€æœ‰åŒ…çš„æµ‹è¯•
- ä½¿ç”¨ Vitest æµ‹è¯•æ¡†æ¶
- æ”¯æŒ TypeScript

#### `test:ui` - UIæµ‹è¯•

```bash
pnpm test:ui
```

- å¯åŠ¨æµ‹è¯•UIç•Œé¢
- å¯è§†åŒ–æµ‹è¯•ç»“æœ
- æ”¯æŒäº¤äº’å¼è°ƒè¯•

#### `test:coverage` - è¦†ç›–ç‡æµ‹è¯•

```bash
pnpm test:coverage
```

- ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
- ä½¿ç”¨ V8 è¦†ç›–ç‡å·¥å…·
- è¾“å‡ºè¯¦ç»†è¦†ç›–ç‡ä¿¡æ¯

#### `test:watch` - ç›‘å¬æµ‹è¯•

```bash
pnpm test:watch
```

- ç›‘å¬æ–‡ä»¶å˜åŒ–
- è‡ªåŠ¨é‡æ–°è¿è¡Œæµ‹è¯•
- æé«˜å¼€å‘æ•ˆç‡

### 3. æ¸…ç†è„šæœ¬ âœ… å·²å®ç°

#### `clean` - æ ‡å‡†æ¸…ç†

```bash
pnpm clean
```

- æ¸…ç†æ‰€æœ‰åŒ…çš„ dist ç›®å½•
- åˆ é™¤æ„å»ºäº§ç‰©

#### `clean:all` - å®Œå…¨æ¸…ç†

```bash
pnpm clean:all
```

- æ¸…ç†æ ¹ç›®å½•å’Œæ‰€æœ‰åŒ…
- åˆ é™¤æ‰€æœ‰æ„å»ºæ–‡ä»¶

## ğŸ¯ ä»£ç è´¨é‡è„šæœ¬

### 1. `lint` - ä»£ç æ£€æŸ¥ âœ… å·²å®ç°

```bash
pnpm lint
```

- è¿è¡Œ ESLint æ£€æŸ¥
- æ£€æŸ¥ä»£ç é£æ ¼å’Œæ½œåœ¨é—®é¢˜
- æ”¯æŒ TypeScript å’Œ Vue

### 2. `lint:fix` - è‡ªåŠ¨ä¿®å¤ âœ… å·²å®ç°

```bash
pnpm lint:fix
```

- è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
- æ ¼å¼åŒ–ä»£ç 

### 3. `lint:check` - ä¸¥æ ¼æ£€æŸ¥ âœ… å·²å®ç°

```bash
pnpm lint:check
```

- é›¶å®¹å¿æ¨¡å¼
- ä»»ä½•è­¦å‘Šéƒ½ä¼šå¯¼è‡´å¤±è´¥

### 4. `type-check` - ç±»å‹æ£€æŸ¥ âœ… å·²å®ç°

```bash
pnpm type-check
```

- è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
- æ£€æŸ¥æ‰€æœ‰ç±»å‹å®šä¹‰
- ç”Ÿæˆç±»å‹é”™è¯¯æŠ¥å‘Š

### 5. `pre-commit.js` - é¢„æäº¤æ£€æŸ¥ âœ… å·²å®ç°

```bash
node scripts/pre-commit.js
```

- Git é¢„æäº¤é’©å­
- è¿è¡Œ lint-staged
- ç¡®ä¿ä»£ç è´¨é‡

## ğŸ“Š ç›‘æ§å’Œå¤‡ä»½è„šæœ¬

### 1. `monitor.js` - æ€§èƒ½ç›‘æ§å·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: ç›‘æ§é¡¹ç›®æ€§èƒ½æŒ‡æ ‡ï¼Œç”Ÿæˆåˆ†ææŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•**:

```bash
# ç›‘æ§æ„å»ºæ€§èƒ½
node scripts/monitor.js build

# ç›‘æ§æµ‹è¯•æ€§èƒ½
node scripts/monitor.js test

# ç›‘æ§å®‰å…¨çŠ¶æ€
node scripts/monitor.js security

# ç›‘æ§æ‰€æœ‰æŒ‡æ ‡
node scripts/monitor.js all

# ç”ŸæˆæŠ¥å‘Š
node scripts/monitor.js report
```

**ç›‘æ§æŒ‡æ ‡**:

- æ„å»ºæ—¶é—´å’ŒæˆåŠŸç‡
- æµ‹è¯•è¦†ç›–ç‡å’Œæ‰§è¡Œæ—¶é—´
- åŒ…å¤§å°å’Œä¾èµ–åˆ†æ
- å®‰å…¨æ¼æ´æ£€æŸ¥
- æ€§èƒ½è¶‹åŠ¿åˆ†æ

**é…ç½®é€‰é¡¹**:

```javascript
const MONITOR_CONFIG = {
  buildTimeout: 300000, // æ„å»ºè¶…æ—¶æ—¶é—´
  testTimeout: 60000, // æµ‹è¯•è¶…æ—¶æ—¶é—´
  maxPackageSize: 1024 * 1024, // æœ€å¤§åŒ…å¤§å°
  logFile: 'monitor-logs.json', // æ—¥å¿—æ–‡ä»¶
};
```

**è¾“å‡ºæ–‡ä»¶**:

- `monitor-logs.json` - ç›‘æ§æ—¥å¿—
- `monitor-report.json` - åˆ†ææŠ¥å‘Š

### 2. `rollback.js` - å¤‡ä»½å›æ»šå·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: åˆ›å»ºé¡¹ç›®å¤‡ä»½ï¼Œæ”¯æŒç‰ˆæœ¬å›æ»š

**ä½¿ç”¨æ–¹æ³•**:

```bash
# åˆ›å»ºå¤‡ä»½
node scripts/rollback.js create

# åˆ—å‡ºå¤‡ä»½
node scripts/rollback.js list

# æ‰§è¡Œå›æ»š
node scripts/rollback.js rollback <backup-name>

# æ¸…ç†æ—§å¤‡ä»½
node scripts/rollback.js cleanup
```

**å¤‡ä»½å†…å®¹**:

- åŒ…ç‰ˆæœ¬ä¿¡æ¯
- Git æäº¤ä¿¡æ¯
- åŒ…ä¾èµ–å…³ç³»
- é…ç½®æ–‡ä»¶

**é…ç½®é€‰é¡¹**:

```javascript
const ROLLBACK_CONFIG = {
  maxBackups: 5, // æœ€å¤§å¤‡ä»½æ•°é‡
  backupDir: '.backups', // å¤‡ä»½ç›®å½•
  npmRegistry: 'https://registry.npmjs.org',
};
```

**å¤‡ä»½æ–‡ä»¶ç»“æ„**:

```
.backups/
â”œâ”€â”€ backup-2024-01-01T10-00-00-000Z/
â”‚   â”œâ”€â”€ backup-info.json
â”‚   â””â”€â”€ packages/
â””â”€â”€ backup-2024-01-02T10-00-00-000Z/
    â”œâ”€â”€ backup-info.json
    â””â”€â”€ packages/
```

## ğŸ› ï¸ å·¥å…·è„šæœ¬

### 1. `build-min.js` - æœ€å°åŒ–æ„å»ºå·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: ä¸ºæ„å»ºäº§ç‰©ç”Ÿæˆå‹ç¼©ç‰ˆæœ¬

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/build-min.js [package-path]
```

**ç‰¹æ€§**:

- æ”¯æŒ ESMã€CJSã€UMD æ ¼å¼
- ä½¿ç”¨ Terser è¿›è¡Œå‹ç¼©
- è‡ªåŠ¨ç”Ÿæˆ `.min.js` æ–‡ä»¶
- æ”¯æŒæ‰¹é‡å¤„ç†

### 2. `update-lint-scripts.js` - Lintè„šæœ¬æ›´æ–°å™¨ âœ… å·²å®ç°

**åŠŸèƒ½**: æ›´æ–°åŒ…ä¸­çš„ lint è„šæœ¬é…ç½®

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/update-lint-scripts.js
```

### 3. `cleanup-scripts.js` - è„šæœ¬æ¸…ç†å·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/cleanup-scripts.js
```

### 4. `deploy-docs.js` - æ–‡æ¡£éƒ¨ç½²å·¥å…· âœ… å·²å®ç°

**åŠŸèƒ½**: è‡ªåŠ¨åŒ–éƒ¨ç½²æ–‡æ¡£ç«™ç‚¹

**ä½¿ç”¨æ–¹æ³•**:

```bash
node scripts/deploy-docs.js
```

## ğŸ“š ä½¿ç”¨æŒ‡å—

### å¼€å‘å·¥ä½œæµ

#### æ–°åŠŸèƒ½å¼€å‘

```bash
# 1. å¯åŠ¨äº¤äº’å¼å·¥å…·
pnpm interactive

# 2. é€‰æ‹©å¼€å‘å·¥å…· -> åˆ›å»ºæ–°åŒ…
# æˆ–è€…ç›´æ¥ä½¿ç”¨å‘½ä»¤
node scripts/create-package.js <package-name>

# 3. è®¾ç½®ç¯å¢ƒ
pnpm env:local

# 4. å¼€å‘ä»£ç 
# ... ç¼–å†™ä»£ç  ...

# 5. è¿è¡Œæµ‹è¯•
pnpm test

# 6. æ£€æŸ¥ä»£ç è´¨é‡
pnpm lint
pnpm type-check

# 7. æ„å»º
pnpm build
```

#### ç±»å‹ç”Ÿæˆå·¥ä½œæµ

```bash
# ä½¿ç”¨äº¤äº’å¼å·¥å…·
pnpm interactive
# é€‰æ‹©ç”Ÿæˆå·¥å…· -> ç”Ÿæˆæ‰€æœ‰ç±»å‹

# æˆ–è€…ç›´æ¥ä½¿ç”¨å‘½ä»¤
pnpm generate:all

# æˆ–è€…åˆ†åˆ«ç”Ÿæˆ
pnpm generate:types
pnpm generate:api
pnpm generate:graphql
```

#### å‘å¸ƒå·¥ä½œæµ

```bash
# 1. è¿è¡Œæ‰€æœ‰æ£€æŸ¥
pnpm lint
pnpm type-check
pnpm test

# 2. æ„å»º
pnpm build

# 3. åˆ›å»ºå˜æ›´é›†
pnpm changeset

# 4. å‘å¸ƒ
pnpm release
```

### ç¯å¢ƒç®¡ç†

```bash
# ä½¿ç”¨äº¤äº’å¼å·¥å…·
pnpm interactive
# é€‰æ‹©ç¯å¢ƒç®¡ç†

# æˆ–è€…ç›´æ¥ä½¿ç”¨å‘½ä»¤
pnpm env:create <environment>
pnpm env:validate
pnpm env:check
```

### ç›‘æ§å’Œå¤‡ä»½

```bash
# ä½¿ç”¨äº¤äº’å¼å·¥å…·
pnpm interactive
# é€‰æ‹©ç›‘æ§ç®¡ç†æˆ–å¤‡ä»½ç®¡ç†

# æˆ–è€…ç›´æ¥ä½¿ç”¨å‘½ä»¤
node scripts/monitor.js <type>
node scripts/rollback.js create
node scripts/rollback.js list
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

| é—®é¢˜           | è§£å†³æ–¹æ¡ˆ                         |
| -------------- | -------------------------------- |
| ç¯å¢ƒå˜é‡æœªåŠ è½½ | `pnpm env:validate`              |
| ç±»å‹ç”Ÿæˆå¤±è´¥   | `node scripts/generate-api.js`   |
| æ„å»ºå¤±è´¥       | `pnpm clean:all && pnpm install` |
| æµ‹è¯•å¤±è´¥       | `node scripts/test-env.js`       |
| ä»£ç æ£€æŸ¥å¤±è´¥   | `pnpm lint:fix`                  |

### è°ƒè¯•å‘½ä»¤

```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
export DEBUG=true

# æŸ¥çœ‹ç›‘æ§æ—¥å¿—
cat monitor-logs.json

# åˆ†ææ„å»ºæ€§èƒ½
time pnpm build
```

## ğŸ“ˆ è„šæœ¬ä¼˜åŒ–å»ºè®®

### å·²å®Œæˆä¼˜åŒ– âœ…

- âœ… ä½¿ç”¨å¹¶è¡Œå¤„ç†æé«˜æ„å»ºé€Ÿåº¦
- âœ… å®ç°å¢é‡æ„å»ºå‡å°‘é‡å¤å·¥ä½œ
- âœ… æ·»åŠ ä»£ç ç”Ÿæˆæ¨¡æ¿
- âœ… å®ç°æ™ºèƒ½é”™è¯¯ä¿®å¤å»ºè®®
- âœ… å¢åŠ å¯è§†åŒ–ç›‘æ§ç•Œé¢

### ä¸‹ä¸€æ­¥ä¼˜åŒ–è®¡åˆ’

- ğŸ”„ å®ç°æ›´æ™ºèƒ½çš„ä¾èµ–ç®¡ç†
- ğŸ”„ æ·»åŠ æ›´å¤šè‡ªåŠ¨åŒ–æµ‹è¯•åœºæ™¯
- ğŸ”„ ä¼˜åŒ–æ„å»ºç¼“å­˜ç­–ç•¥
- ğŸ”„ å¢å¼ºé”™è¯¯è¯Šæ–­èƒ½åŠ›

## ğŸ¯ æ€»ç»“

é€šè¿‡äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨çš„å®ç°ï¼Œæˆ‘ä»¬å¤§å¹…ç®€åŒ–äº†é¡¹ç›®çš„ä½¿ç”¨å¤æ‚åº¦ï¼š

- **è„šæœ¬æ•°é‡**: ä»35ä¸ªå‡å°‘åˆ°11ä¸ª (å‡å°‘68%)
- **å‘½ä»¤è®°å¿†**: åªéœ€è¦è®°ä½ä¸€ä¸ªå‘½ä»¤ `pnpm interactive`
- **ç”¨æˆ·ä½“éªŒ**: æ¸…æ™°çš„èœå•å’Œé€‰é¡¹ï¼Œå¸¦emojiå›¾æ ‡
- **æ“ä½œæ•ˆç‡**: å¾ªç¯æ“ä½œï¼Œæ‰§è¡Œåè‡ªåŠ¨è¿”å›èœå•

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

1. **å®Œæ•´çš„å¼€å‘å·¥å…·é“¾** - ESLintã€Prettierã€Vitestã€Husky
2. **äº¤äº’å¼è„šæœ¬ç®¡ç†å™¨** - ç»Ÿä¸€çš„äº¤äº’å¼ç•Œé¢
3. **ç±»å‹ç”Ÿæˆç³»ç»Ÿ** - å®Œæ•´çš„TypeScriptç±»å‹ç”Ÿæˆå·¥å…·é“¾
4. **ç¯å¢ƒç®¡ç†ç³»ç»Ÿ** - å¤šç¯å¢ƒé…ç½®å’ŒéªŒè¯
5. **æ€§èƒ½ç›‘æ§å·¥å…·** - æ„å»ºã€æµ‹è¯•ã€å®‰å…¨ç›‘æ§
6. **å¤‡ä»½å›æ»šåŠŸèƒ½** - ç‰ˆæœ¬ç®¡ç†å’Œå›æ»šæœºåˆ¶
7. **æ–‡æ¡£ç³»ç»Ÿ** - VitePressæ–‡æ¡£ç«™ç‚¹

### ğŸ¯ é¡¹ç›®ä¼˜åŠ¿

- **ç°ä»£åŒ–æ¶æ„**: Vite + TypeScript
- **å®Œæ•´å·¥å…·é“¾**: ä»å¼€å‘åˆ°éƒ¨ç½²çš„å…¨æµç¨‹æ”¯æŒ
- **äº¤äº’å¼ç®¡ç†**: å¤§å¹…ç®€åŒ–æ“ä½œå¤æ‚åº¦
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptæ”¯æŒ
- **è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜**: å‡å°‘æ‰‹åŠ¨æ“ä½œï¼Œæé«˜æ•ˆç‡
- **å¯æ‰©å±•æ€§å¼º**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’ŒåŒ…

è¿™ç§è®¾è®¡è®©é¡¹ç›®æ›´åŠ æ˜“ç”¨ï¼ŒåŒæ—¶ä¿æŒäº†æ‰€æœ‰åŠŸèƒ½çš„å®Œæ•´æ€§å’Œçµæ´»æ€§ã€‚
