# IMTP Monorepo é¡¹ç›®è®¾ç½®å®Œæˆ

## ğŸ‰ é¡¹ç›®å·²æˆåŠŸåˆ›å»ºï¼

æ‚¨çš„IMTP monorepoé¡¹ç›®å·²ç»è®¾ç½®å®Œæˆï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š

### âœ… å·²å®Œæˆçš„åŠŸèƒ½

1. **Monorepoç»“æ„**

   - ä½¿ç”¨pnpm workspacesç®¡ç†å¤šä¸ªåŒ…
   - ç»Ÿä¸€çš„ä¾èµ–ç®¡ç†å’Œæ„å»ºæµç¨‹

2. **æ„å»ºç³»ç»Ÿ**

   - Rollup + TypeScripté…ç½®
   - æ”¯æŒCommonJSå’ŒESMåŒæ ¼å¼è¾“å‡º
   - è‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰æ–‡ä»¶

3. **å¼€å‘å·¥å…·**

   - TypeScriptæ”¯æŒ
   - ESLintä»£ç æ£€æŸ¥
   - Jestæµ‹è¯•æ¡†æ¶
   - è‡ªåŠ¨åŒ–åŒ…åˆ›å»ºè„šæœ¬

4. **ç‰ˆæœ¬ç®¡ç†**

   - Changesetsé…ç½®
   - è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

5. **ç¤ºä¾‹åŒ…**
   - `@imtp/example-package` - å®Œæ•´çš„ç¤ºä¾‹åŒ…
   - `@imtp/utils` - æ–°åˆ›å»ºçš„åŒ…

### ğŸ“ é¡¹ç›®ç»“æ„

```
imtp/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ example-package/     # ç¤ºä¾‹åŒ…
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â”œâ”€â”€ rollup.config.js
â”‚   â”‚   â”œâ”€â”€ jest.config.js
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ utils/               # æ–°åˆ›å»ºçš„åŒ…
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ tests/
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â”œâ”€â”€ rollup.config.js
â”‚       â”œâ”€â”€ jest.config.js
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ create-package.js    # è‡ªåŠ¨åŒ–åŒ…åˆ›å»ºè„šæœ¬
â”œâ”€â”€ package.json             # æ ¹é…ç½®
â”œâ”€â”€ pnpm-workspace.yaml      # pnpmå·¥ä½œåŒºé…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScripté…ç½®
â”œâ”€â”€ rollup.config.js        # Rollupé…ç½®æ¨¡æ¿
â”œâ”€â”€ jest.config.js          # Jesté…ç½®
â”œâ”€â”€ .eslintrc.js            # ESLinté…ç½®
â”œâ”€â”€ .changeset/             # Changesetsé…ç½®
â”œâ”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

### ğŸš€ å¿«é€Ÿå¼€å§‹

1. **å®‰è£…ä¾èµ–**

   ```bash
   pnpm install
   ```

2. **å¼€å‘æ¨¡å¼**

   ```bash
   pnpm dev
   ```

3. **æ„å»ºæ‰€æœ‰åŒ…**

   ```bash
   pnpm build
   ```

4. **è¿è¡Œæµ‹è¯•**

   ```bash
   pnpm test
   ```

5. **ä»£ç æ£€æŸ¥**
   ```bash
   pnpm lint
   ```

### ğŸ“¦ åˆ›å»ºæ–°åŒ…

ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬åˆ›å»ºæ–°åŒ…ï¼š

```bash
pnpm create-package <package-name>
```

ä¾‹å¦‚ï¼š

```bash
pnpm create-package components
pnpm create-package hooks
pnpm create-package types
```

### ğŸ“‹ ä¸‹ä¸€æ­¥å»ºè®®

1. **é…ç½®npmç»„ç»‡**

   - åœ¨npmä¸Šåˆ›å»º`@imtp`ç»„ç»‡
   - é…ç½®å‘å¸ƒæƒé™

2. **æ·»åŠ CI/CD**

   - é…ç½®GitHub Actions
   - è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒ

3. **å®Œå–„æ–‡æ¡£**

   - ä¸ºæ¯ä¸ªåŒ…ç¼–å†™è¯¦ç»†æ–‡æ¡£
   - æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

4. **ä»£ç è´¨é‡**
   - é…ç½®Prettier
   - æ·»åŠ Huskyé’©å­
   - é…ç½®æäº¤è§„èŒƒ

### ğŸ”§ æŠ€æœ¯æ ˆ

- **åŒ…ç®¡ç†å™¨**: pnpm
- **æ„å»ºå·¥å…·**: Rollup
- **è¯­è¨€**: TypeScript
- **æµ‹è¯•**: Jest
- **ä»£ç æ£€æŸ¥**: ESLint
- **ç‰ˆæœ¬ç®¡ç†**: Changesets
- **å·¥ä½œåŒº**: pnpm workspaces

### ğŸ“ æ³¨æ„äº‹é¡¹

1. æ‰€æœ‰åŒ…éƒ½ä½¿ç”¨`@imtp/`å‰ç¼€
2. åŒ…ååªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦
3. æ¯ä¸ªåŒ…éƒ½åº”è¯¥æœ‰å®Œæ•´çš„æµ‹è¯•è¦†ç›–
4. éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ

---

ğŸŠ **æ­å–œï¼æ‚¨çš„npmåŒ…å¼€å‘ç¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªï¼**
